<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Formulario de Pedido de Vinos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        const productos = {
            "A Corazon Abierto": ["Malbec Etiqueta Negra", "Cabernet Franc Etiqueta Negra", "Cabernet Sauvignon Etiqueta Negra", "Gran Malbec", "Gran Corte"],
            "Amosa": ["Amosa Chardonnay", "Amosa Rose", "Amosa Malbec de la Casa", "Amosa Gran Blend"],
            "Familia Kretschmar": ["Chupasangre Cabernet Sauvignon", "Chupasangre Malbec", "Chupasangre Malbec Rose", "Chupasangre Gran Corte Blend", "Sanguinaria Malbec", "Sanguinaria Cabernet Franc", "4 Brotes Malbec"],
            "Tiammat": ["N¬∞ 7", "N¬∞ 9", "N¬∞ 10", "N¬∞ 11", "N¬∞ 12", "N¬∞ 14"],
            "Iaccarini": ["Via Blanca White Blend", "Via Blanca Malbec", "Via Blanca Bonarda", "Via Blanca Cabernet Sauvignon", "Via Blanca Red Blend", "Via Blanca Terroir Selection Malbec", "Via Blanca Terroir Selection Cabernet Sauvignon", "Via Blanca Terroir Selection Blend de Tintas", "Cavas Don Nicasio Assemblage I BN - SY", "Cavas Don Nicasio Assemblage II MB - MB", "Cavas Don Nicasio Assemblage III CS - MB - PV", "Cavas Don Nicasio Single Vineyard Malbec"],
            "Che Bandoneon": ["Che bandoneon Cab. Franc", "Che Bandoneon Malbec", "Che Bandoneon Cab. Sauvignon", "Che Bandoneon Reserva Malbec"],
            "Aicardi": ["Serie Terroir Pinot Noir Contraflor", "Serie Terroir Malbec Contraflor", "Parcela √önica Reserva Malbec", "Parcela √önica Reserva Cab. Sauvignon", "Parcela √önica Reserva Merlot", "Parcela √önica Reserva Pinot Noir", "Parcela √önica Reserva Cab. Franc", "Barrel Fermented Cab. Franc", "Barrel Fermented Red Blend Malbec/Cab. Sauv.", "Barrel Fermented Cab. Franc Cab. Franc/Merlot"],
            "Schiavi": ["√öltimo Hombre Chenin"]
        };

        function updatePresentaciones(index) {
            const familia = document.getElementById("familia_" + index).value;
            const presentacion = document.getElementById("presentacion_" + index);
            presentacion.innerHTML = "";
            if (productos[familia]) {
                productos[familia].forEach(item => {
                    const option = document.createElement("option");
                    option.text = item;
                    option.value = item;
                    presentacion.add(option);
                });
            }
        }

        function agregarProducto() {
            const index = document.querySelectorAll('.producto-row').length;
            const container = document.getElementById("productosContainer");

            const div = document.createElement("div");
            div.classList.add("producto-row", "grid", "grid-cols-3", "gap-2", "mb-2");
            div.innerHTML = `
                <select id="familia_${index}" class="p-2 border rounded" onchange="updatePresentaciones(${index})">
                    <option value="">Familia</option>
                    ${Object.keys(productos).map(f => `<option value="${f}">${f}</option>`).join('')}
                </select>
                <select id="presentacion_${index}" class="p-2 border rounded">
                    <option value="">Presentaci√≥n</option>
                </select>
                <input type="number" id="cantidad_${index}" class="p-2 border rounded" placeholder="Cantidad">
            `;
            container.appendChild(div);
        }

        function generarResumen() {
            const nombre = document.getElementById("nombre").value;
            const direccion = document.getElementById("direccion").value;
            const localidad = document.getElementById("localidad").value;
            const telefono = document.getElementById("telefono").value;
            const email = document.getElementById("email").value;
            const entrega = document.getElementById("entrega").value;
            const pago = document.getElementById("pago").value;
            const observaciones = document.getElementById("observaciones").value;

            let mensaje = `Pedido de vinos:%0ACliente: ${nombre}%0ADirecci√≥n: ${direccion}, ${localidad}%0ATel√©fono: ${telefono}%0AEmail: ${email}%0AEntrega: ${entrega}%0APago: ${pago}%0A%0AProductos:%0A`;

            document.querySelectorAll('.producto-row').forEach((row, index) => {
                const fam = document.getElementById("familia_" + index).value;
                const pres = document.getElementById("presentacion_" + index).value;
                const cant = document.getElementById("cantidad_" + index).value;
                if (fam && pres && cant) {
                    mensaje += `- ${fam} - ${pres} x ${cant}%0A`;
                }
            });

            if (observaciones) {
                mensaje += `%0AObservaciones: ${observaciones}`;
            }

            document.getElementById("preview").innerText = decodeURIComponent(mensaje.replace(/%0A/g, "\\n"));
            document.getElementById("whatsappLink").href = `https://wa.me/?text=${mensaje}`;
        }
    </script>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-3xl mx-auto bg-white p-6 rounded-xl shadow space-y-4">
        <h1 class="text-2xl font-bold text-center">Formulario de Pedido</h1>

        <input id="nombre" type="text" placeholder="Nombre o Raz√≥n Social" class="w-full p-2 border rounded" required>
        <input id="direccion" type="text" placeholder="Direcci√≥n de entrega" class="w-full p-2 border rounded" required>
        <input id="localidad" type="text" placeholder="Localidad / Provincia" class="w-full p-2 border rounded" required>
        <input id="telefono" type="text" placeholder="Tel√©fono" class="w-full p-2 border rounded">
        <input id="email" type="email" placeholder="Email" class="w-full p-2 border rounded">

        <select id="entrega" class="w-full p-2 border rounded">
            <option value="">Tipo de entrega</option>
            <option value="Retiro">Retiro</option>
            <option value="Env√≠o">Env√≠o</option>
            <option value="Otro">Otro</option>
        </select>

        <select id="pago" class="w-full p-2 border rounded">
            <option value="">Condici√≥n de pago</option>
            <option value="Contado">Contado</option>
            <option value="Transferencia">Transferencia</option>
            <option value="Otro">Otro</option>
        </select>

        <textarea id="observaciones" rows="3" placeholder="Observaciones" class="w-full p-2 border rounded"></textarea>

        <div id="productosContainer" class="space-y-2">
            <!-- productos din√°micos aqu√≠ -->
        </div>
        <button onclick="agregarProducto()" class="bg-blue-500 text-white px-4 py-2 rounded">+ Agregar producto</button>

        <button onclick="generarResumen()" class="bg-yellow-500 text-white px-4 py-2 rounded w-full">üîç Vista previa</button>

        <pre id="preview" class="bg-gray-200 p-4 rounded text-sm whitespace-pre-wrap"></pre>

        <a id="whatsappLink" target="_blank" class="block text-center bg-green-600 text-white p-3 rounded hover:bg-green-700 transition">üì§ Enviar por WhatsApp</a>
    </div>

    <script>
        // Cargar uno por defecto
        window.onload = agregarProducto;
    </script>
</body>
</html>
"""

# Guardar archivo
html_path = "/mnt/data/formulario_pedido_completo.html"
with open(html_path, "w", encoding="utf-8") as f:
    f.write(full_html_content)

html_path



